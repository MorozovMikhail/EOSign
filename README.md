# Система электронной подписи ГОСТ для PDF-документов

Веб-приложение для создания и проверки ГОСТ-подписей PDF-документов с возможностью добавления кириллических штампов.

## Возможности

- ✅ Создание ГОСТ-подписи с генерацией ключевой пары и сертификата
- ✅ Добавление кириллического штампа на PDF с настраиваемыми полями
- ✅ Подписание PDF с возвратом ZIP-архива (PDF + signature.txt)
- ✅ Проверка подписи с загрузкой PDF, signature.txt и сертификата
- ✅ Современный веб-интерфейс на React
- ✅ Backend на Spring Boot с интеграцией JavaCSP

## Требования

### Системные требования
- **Java**: JDK 8 или выше
- **Node.js**: версия 14 или выше
- **npm**: версия 6 или выше
- **Maven**: версия 3.6 или выше

### Проверка установки
```bash
java -version
node --version
npm --version
mvn --version
```

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone <URL_ВАШЕГО_РЕПОЗИТОРИЯ>
cd untitled
```

### 2. Настройка backend (Spring Boot)

#### Установка зависимостей Maven
```bash
mvn clean install
```

#### Запуск backend сервера
```bash
mvn spring-boot:run
```

Backend будет доступен по адресу: `http://localhost:8080`

### 3. Настройка frontend (React)

#### Переход в директорию frontend
```bash
cd frontend2
```

#### Установка зависимостей npm
```bash
npm install
```

#### Запуск frontend сервера
```bash
npm start
```

Frontend будет доступен по адресу: `http://localhost:3000`

## Структура проекта

```
untitled/
├── src/                          # Backend (Spring Boot)
│   └── main/
│       ├── java/ru/gostsign/
│       │   ├── controller/       # REST контроллеры
│       │   ├── model/           # Модели данных
│       │   └── service/         # Бизнес-логика
│       └── resources/
│           ├── application.properties
│           └── stamp.png        # Изображение штампа
├── frontend2/                    # Frontend (React)
│   ├── src/
│   │   ├── components/          # React компоненты
│   │   ├── App.tsx             # Главный компонент
│   │   └── index.tsx           # Точка входа
│   ├── package.json
│   └── public/
├── java-csp-5.0.42119-A/        # Библиотеки JavaCSP
├── lib/                         # Дополнительные JAR файлы
├── pom.xml                      # Maven конфигурация
└── README.md                    # Этот файл
```

## API Endpoints

### Backend API (порт 8080)

#### Создание подписи
- **POST** `/api/sign-document`
  - Создает подпись для загруженного PDF
  - Возвращает ZIP-архив с подписанным PDF и signature.txt

#### Проверка подписи
- **POST** `/api/verify-signature`
  - Проверяет подпись PDF
  - Требует: PDF файл, signature.txt (base64), сертификат (base64)

#### Создание штампа
- **POST** `/api/create-stamp`
  - Создает PDF со штампом (для тестирования)

## Использование

### 1. Создание подписи
1. Откройте `http://localhost:3000`
2. Выберите PDF файл для подписи
3. Нажмите "Подписать документ"
4. Скачайте ZIP-архив с подписанным PDF и signature.txt

### 2. Проверка подписи
1. Загрузите подписанный PDF файл
2. Загрузите файл signature.txt (как текст)
3. Загрузите сертификат (как текст)
4. Нажмите "Проверить подпись"

## Настройка штампа

Штамп настраивается в файле `src/main/resources/stamp.png`. Координаты полей штампа можно изменить в `GostSignService.java`.

## Устранение неполадок

### Проблемы с JavaCSP
- Убедитесь, что все JAR файлы из `java-csp-5.0.42119-A/` и `lib/` присутствуют
- Проверьте, что Java версии 8 или выше

### Проблемы с портами
- Backend использует порт 8080
- Frontend использует порт 3000
- Убедитесь, что порты свободны

### Проблемы с Maven
```bash
mvn clean
mvn install -U
```

### Проблемы с npm
```bash
cd frontend2
rm -rf node_modules package-lock.json
npm install
```

## Разработка

### Добавление новых полей штампа
1. Отредактируйте `src/main/resources/stamp.png`
2. Обновите координаты в `GostSignService.java`
3. Перезапустите backend

### Изменение стилей frontend
1. Отредактируйте файлы в `frontend2/src/`
2. Изменения автоматически отобразятся в браузере

## Лицензия

Проект использует библиотеки JavaCSP от КриптоПро. Убедитесь в наличии соответствующих лицензий.

## Поддержка

При возникновении проблем:
1. Проверьте логи в консоли браузера (F12)
2. Проверьте логи Spring Boot в терминале
3. Убедитесь, что все зависимости установлены корректно 